<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>fran¬∑</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="page">

    <h1 class="post-binaire-texte titre">
      bienvenu..e <span class="emoji">‚ù§Ô∏è‚Äçüî•</span>
    </h1>

    <p class="post-binaire-texte texte"> 
      j'ai finalement r√©ussi √† faire un site avec mes petits doigts ! youhou !<br>
      <br>
      bon,<br>
      il na√Æt aussi lentement que mes po√®mes...<br>
      mais il sera bient√¥t l√†.<br> 
      peut-√™tre.<br> 
      quand j'aurai fini tout ce qui tra√Æne dans mes tiroirs.<br>
      <br>
      vous pouvez d√©j√† <a href="https://franxx.ch/recueil.html">cliquer ici</a>
      pour voir une tentative de construction de mise en page pour le 
      <em>recueil auquel il faudrait trouver un nom</em>.  
      c'est √† vos risques et p√©rils, parfois √ßa marchera et parfois pas.  
      les al√©as des internets mondiaux.<br>
      <br>
      bisous si consentis.<br>
      <br>
      love œ™<br>
      <br>
      fran¬∑
    </p>

  </div>

  <!-- Post-it agenda rose -->
  <div id="postit-agenda">
    <div class="postit-bar">
      <button id="close-agenda" aria-label="Fermer le post-it agenda">√ó</button>
    </div>
    <div class="postit-content">
      <p>
        <strong>
          <span class="full-love" id="agenda-love">
            prochaines lectures &amp; performances
          </span>
        </strong>
      </p>

      <ul>
        <li>
          31.01.25 ‚Äî 18:30 ‚Äî
          <a href="https://www.boutiquedulivre.ch/">Boutique du Livre, Neuch√¢tel</a>
          ‚Äî Performance <em>"Dieu ressemble vaguement √† quelqu'un..e que je connais"</em>
        </li>
        <li>
          date et heure √† confirmer ‚Äî
          <a href="https://www.instagram.com/jazz.a.la.bourg/">Jazz √† la Bourg, Fribourg</a>
          ‚Äî Lecture du <em>"Recueil auquel il faudrait trouver un nom"</em>
        </li>
      </ul>
    </div>
  </div>

  <!-- ICI le footer partag√© -->
  <div id="footer-placeholder"></div>

  <!-- √âcran de transition glitch -->
  <div id="glitch-screen">
    <img src="glitch.png" alt="">
  </div>

  <!-- Script de transition -->
  <script src="glitch.js"></script>

  <!-- Script de chargement du footer -->
  <script>
    fetch("footer.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("footer-placeholder").innerHTML = data;
      });
  </script>

  <!-- Script post-it agenda : centr√©, draggable, fermable -->
  <script>
    (function() {
      var agenda = document.getElementById('postit-agenda');
      var closeBtn = document.getElementById('close-agenda');

      if (!agenda) return;

      // centre le post-it au chargement (sur grands √©crans)
      function centerAgenda() {
        // sur mobile on le laisse dans le flux normal
        if (window.matchMedia("(max-width: 700px)").matches) {
          agenda.style.position = "static";
          agenda.style.left = "";
          agenda.style.top = "";
          return;
        }

        agenda.style.position = "fixed";
        agenda.style.left = "0px";
        agenda.style.top = "0px";

        var rect = agenda.getBoundingClientRect();
        var x = (window.innerWidth  - rect.width)  / 2;
        var y = Math.max(40, (window.innerHeight - rect.height) / 2);

        agenda.style.left = x + "px";
        agenda.style.top  = y + "px";
      }

      // centre au d√©part
      window.addEventListener('load', centerAgenda);
      window.addEventListener('resize', centerAgenda);

      // bouton fermer
      if (closeBtn) {
        closeBtn.addEventListener('click', function (e) {
          e.stopPropagation();
          agenda.style.display = 'none';
        });
      }

      // DRAG
      var dragging = false;
      var startX = 0, startY = 0;
      var startLeft = 0, startTop = 0;

      function startDrag(e) {
        if (window.matchMedia("(max-width: 700px)").matches) {
          // sur mobile, on √©vite le drag compliqu√©
          return;
        }

        // ne pas draguer si on clique sur le bouton fermer
        if (e.target === closeBtn) return;

        var evt = e.touches ? e.touches[0] : e;
        dragging = true;
        agenda.classList.add('dragging');

        var rect = agenda.getBoundingClientRect();
        startLeft = rect.left;
        startTop  = rect.top;
        startX = evt.clientX;
        startY = evt.clientY;

        agenda.style.position = "fixed";
        agenda.style.left = startLeft + "px";
        agenda.style.top  = startTop  + "px";

        document.addEventListener('mousemove', onDragMove);
        document.addEventListener('mouseup', stopDrag);
        document.addEventListener('touchmove', onDragMove, { passive: false });
        document.addEventListener('touchend', stopDrag);
      }

      function onDragMove(e) {
        if (!dragging) return;
        e.preventDefault();

        var evt = e.touches ? e.touches[0] : e;
        var dx = evt.clientX - startX;
        var dy = evt.clientY - startY;

        agenda.style.left = (startLeft + dx) + "px";
        agenda.style.top  = (startTop  + dy) + "px";
      }

      function stopDrag() {
        if (!dragging) return;
        dragging = false;
        agenda.classList.remove('dragging');

        document.removeEventListener('mousemove', onDragMove);
        document.removeEventListener('mouseup', stopDrag);
        document.removeEventListener('touchmove', onDragMove);
        document.removeEventListener('touchend', stopDrag);
      }

      // on peut draguer en cliquant n'importe o√π sur le post-it (sauf la croix)
      agenda.addEventListener('mousedown', startDrag);
      agenda.addEventListener('touchstart', startDrag, { passive: false });

    })();
  </script>

  <!-- Script magique : transforme "prochaines lectures & performances" en lettres .letter -->
  <script>
    (function() {
      function sprinkleLove(el) {
        if (!el) return;

        const text = el.innerText;
        el.innerHTML = "";

        let delay = 0;
        for (const char of text) {
          if (char === " ") {
            el.innerHTML += " ";
            continue;
          }

          const span = document.createElement("span");
          span.className = "letter";
          span.style.setProperty("--delay", delay + "s");
          span.textContent = char;
          el.appendChild(span);
          delay += 0.08;
        }
      }

      sprinkleLove(document.getElementById("agenda-love"));
    })();
  </script>

</body>
</html>
