/* =========================================================
   FONT & BASE
========================================================= */

@font-face {
  font-family: "PostBinaire";
  src: url("ma-police.woff2") format("woff2"),
       url("ma-police.woff") format("woff");
}

@font-face {
  font-family: "AdelpheFlorealBold";
  src: url("Adelphe-Trouble-FlorealBold.otf") format("opentype");
}

.font-fructidor {
  font-family: "AdelpheFructidorBold", serif;
}

@font-face {
  font-family: "AdelpheFructidorBold";
  src: url("Adelphe-Trouble-FructidorBold.woff2") format("woff2");
}

html, body {
  margin: 0;
  padding: 0;
}

body {
  font-family: PostBinaire, sans-serif;
  font-size: 20px;
  line-height: 1.6;
  background-color: #ff2fa3;
  color: #000;
}

.post-binaire-texte {
  font-feature-settings: "liga" 1, "dlig" 1, "salt" 1;
}

.normal {
  font-style: normal;
}

/* =========================================================
   STRUCTURE GÉNÉRALE
========================================================= */

.page {
  max-width: 680px;
  margin: 120px auto 40px auto;
  padding: 48px;
  background-color: #ffffff;
  border: 6px solid #000000;
  box-shadow: 12px 12px 0 #000;
  overflow: visible;
  position: relative;
}

.titre {
  font-size: 48px;
  line-height: 1.05;
  margin: 0;
  color: #ff2fa3;
}

.texte {
  font-size: 22px;
  color: #ff2fa3;
}

.texte-hors-cadre {
  color: #ffffff;
  max-width: 680px;
  margin: 40px auto 80px auto;
  font-size: 18px;
  line-height: 1.7;
}

.emoji {
  font-size: 0.8em;
  margin-left: 0.005em;
}

/* =========================================================
   LIENS (CLIGNOTEMENT)
========================================================= */

a {
  animation: arrow-pulse 3s steps(5) infinite;
}

a:hover {
  animation: none;
  color: hotpink;
}

@keyframes arrow-pulse {
  0% { color: hotpink; }
  50% { color: white; }
  100% { color: hotpink; }
}

/* =========================================================
   PAGE À PROPOS
========================================================= */

.apropos-subtitle {
  margin-top: 4px;
  margin-bottom: 28px;
  font-size: 16px;
  font-style: italic;
  color: #ff2fa3;
  opacity: 0.85;
}

.apropos-content {
  overflow: visible;
}

.apropos-texte {
  font-size: 16px;
  line-height: 1.5;
  color: #ff2fa3;
}

.apropos-legende {
  clear: both;
  margin-top: 12px;
  font-size: 12px;
  font-style: italic;
  opacity: 0.8;
}

.apropos-legende a {
  color: inherit;
  text-decoration: none;
  border-bottom: 1px solid currentColor;
}

/* =========================================================
   POST-IT BLEU (TEXTE)
========================================================= */

#postit-pop {
  position: absolute;
  width: 330px;
  z-index: 20;
  cursor: grab;
}

#postit-pop.dragging {
  cursor: grabbing;
  user-select: none;
}

.postit-bar {
  background:#00a8ff;
  height:28px;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  border:4px solid #00a8ff;
  border-bottom:none;
  box-shadow:10px 10px 0 #00a8ff;
}

#close-postit {
  background:#fff;
  border:2px solid #00a8ff;
  color:#00a8ff;
  width:22px;
  height:22px;
  line-height:18px;
  margin-right:4px;
  font-size:16px;
  cursor:pointer;
}

.postit-content {
  background:#ffffff;
  border:4px solid #00a8ff;
  box-shadow:10px 10px 0 #00a8ff;
  padding:18px;

  font-family: "AdelpheFructidorBold", serif;
  font-size: 15px;
  line-height: 1.45;

  color: #00a8ff;
  text-align: left;

  font-feature-settings: "liga" 1, "dlig" 1;
}

.postit-source {
  display:block;
  margin-top:12px;
  font-size:11px;
  font-style:italic;
  opacity:.85;
  text-align:right;
}

/* =========================================================
   POST-IT JAUNE (PHOTO)
========================================================= */

#postit-photo {
  position:absolute;
  width:200px;
  border:4px solid #EFFF0F;
  background:#fff;
  box-shadow:16px 16px 0 #EFFF0F;
  cursor:grab;
  z-index:15;
}

#postit-photo.dragging {
  cursor: grabbing;
  user-select: none;
}

#postit-photo .postit-bar {
  background:#EFFF0F;
  border-color:#EFFF0F;
  box-shadow:16px 16px 0 #EFFF0F;
}

#postit-photo .close-photo {
  background:#fff;
  border:2px solid #EFFF0F;
  color:#EFFF0F;
  width:22px;
  height:22px;
  line-height:18px;
  margin-right:4px;
  font-size:16px;
  cursor:pointer;
}

#postit-photo img {
  width:100%;
  display:block;
}

/* =========================================================
   MOBILE
========================================================= */

@media (max-width: 700px) {

  #postit-pop,
  #postit-photo {
    position: static;
    width: 100%;
    margin: 24px 0;
  }

}

/* =========================================================
   FOOTER (RESTAURÉ)
========================================================= */

.site-footer {
  color: #ffffff;
  padding: 48px 40px 16px 40px;
  font-size: 13px;
  opacity: 0.9;
  clear: both;
}

.footer-inner.two-lines {
  max-width: 900px;
  margin: 0 auto;
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.footer-top {
  display: grid;
  grid-template-columns: repeat(4, auto);
  justify-content: center;
  align-items: center;
  column-gap: 48px;
  max-width: 900px;
  margin: 0 auto;
}

.footer-left,
.footer-center,
.footer-right {
  justify-self: center;
}

.footer-mail {
  font-style: italic;
}

.footer-bottom {
  margin: 0;
  opacity: 0.8;
  text-align: center;
}

.site-footer a,
.site-footer a:visited {
  color: inherit;
  text-decoration: none;
  border-bottom: 1px solid currentColor;
}

.site-footer a:hover {
  opacity: 0.7;
}
#glitch-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: black;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none;
  z-index: 9999;
  transition: opacity 0.2s steps(2);
}

#glitch-screen img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  mix-blend-mode: screen;
}

#glitch-screen.active {
  opacity: 1;
  pointer-events: all;
}
#glitch-screen::after {
  content: "";
  position: absolute;
  inset: 0;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.04),
      rgba(255,255,255,0.04) 1px,
      transparent 1px,
      transparent 3px
    );
  mix-blend-mode: overlay;
  pointer-events: none;
}
.align-right {
  text-align: right;
}

.full-love {
  display: block;
  margin-top: 18px;
  line-height: 2.6em;
  font-weight: bold;
  font-size: 1.4em;   /* ⬅️ ICI : taille du slogan */
  white-space: nowrap;
}


/* lettres individuelles */
.full-love .letter {
  display: inline-block;
  color: hotpink;
  animation: christmas-flicker 1.8s infinite;
  animation-delay: var(--delay);
}

/* animation guirlande */
@keyframes christmas-flicker {
  0%   { opacity: 1; transform: translateY(0); }
  40%  { opacity: 0.25; transform: translateY(-1px); }
  60%  { opacity: 0.9; transform: translateY(1px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* ligne spéciale */
.postit-content .bombs-line{
  display:block;
  text-align:right;
  font-size: 2em;
  line-height: 0.9;
  margin-top: -0.55em; /* “mord” un peu sur la ligne du dessus */
  letter-spacing: 0.01em;
}

.postit-content .aside-question{
  display: block;
  text-align: right;
  font-style: italic;
  margin-top: 0.5em;
}

.postit-content .dedicace{
  display: block;
  text-align: right;
  font-style: italic;
  margin-bottom: 0.5em;
}

.postit-content .wrap-line{
  display: block;
}

.postit-content .wrap-line.continue{
  padding-left: 1.2em;
}

/* =========================================================
   INDENT WRAP (safe + exceptions)
========================================================= */

.poem-line{
  display: block;
  margin: 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}

.poem-gap{
  height: 1em;
}

/* lignes spéciales : pas d'indent */
.poem-line.no-indent{
  padding-left: 0;
  text-indent: 0;
}

/* MERDE étiré sur toute la largeur du post-it */
.full-width-line{
  display: block;
  width: 100%;

  text-align: center;
  white-space: nowrap;

  font-weight: 700;
  line-height: 0.95;

  padding-left: 0;
  text-indent: 0;
}

}


/* =========================================================
   AJOUT : RISO NIVEAU 2 (PAPIER + GRAIN + SURIMPRESSION + DOUBLE ENCRE)
   -> Ajouté SANS supprimer tes règles existantes
========================================================= */

/* "encres" riso : on se base sur ton magenta + ton bleu postit + ton jaune */
:root{
  --riso-paper: #f6f1e6;
  --riso-ink-a: #ff2fa3; /* ton magenta */
  --riso-ink-b: #00a8ff; /* ton bleu */
  --riso-ink-c: #EFFF0F; /* ton jaune acide */
  --riso-ink-k: #111111;
}

/* Papier global : on garde ton fond magenta mais on lui met un "papier" en sur-couche */
body{
  position: relative;
  background-color: #ff2fa3; /* inchangé, pour garder ton monde fluo */
}

/* Papier/grain en overlay (sous la page blanche, au-dessus du fond magenta) */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events:none;
  z-index: 0;

  background-image:
    radial-gradient(circle at 45% 30%, rgba(255,255,255,0.20), transparent 55%),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.5'/%3E%3C/svg%3E");
  background-size: cover, 260px 260px;
  mix-blend-mode: overlay;
  opacity: 0.35;
}

/* Important : on isole la page pour que les blend-modes restent propres */
.page{
  isolation: isolate;
}

/* Grain + mini trame à l’intérieur de la page (effet “impression”) */
.page::before{
  content:"";
  position:absolute;
  inset:-10px;
  pointer-events:none;
  z-index: 1;

  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.95' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
  background-size: 220px 220px;
  mix-blend-mode: multiply;
  opacity: 0.18;
}

.page::after{
  content:"";
  position:absolute;
  inset:-10px;
  pointer-events:none;
  z-index: 2;

  background:
    repeating-linear-gradient(
      90deg,
      rgba(0,0,0,0.02),
      rgba(0,0,0,0.02) 1px,
      transparent 1px,
      transparent 3px
    );
  mix-blend-mode: multiply;
  opacity: 0.14;
}

/* Tout ce qui est “contenu” dans la page passe au-dessus des overlays */
.page > *{
  position: relative;
  z-index: 3;
}

/* Double encre sur le texte principal (subtil, mais “riso”) */
.post-binaire-texte{
  text-shadow:
    1px 0 0 rgba(0,168,255,0.35),
    -1px 1px 0 rgba(239,255,15,0.22);
}

/* Tu as déjà .texte en magenta : on le “surimprime” plutôt que néon numérique */
.texte{
  mix-blend-mode: multiply;
}

/* Le lien > : double couche d’encre + surimpression */
.glitch-link.intro-arrow{
  position: relative;
  display: inline-block;
  mix-blend-mode: multiply;
  text-decoration: none;
  filter: saturate(1.25) contrast(1.06);
}

.glitch-link.intro-arrow::after{
  content: ">";
  position: absolute;
  left: 0;
  top: 0;
  transform: translate(1px, 1px);
  color: var(--riso-ink-b);
  opacity: 0.85;
  mix-blend-mode: multiply;
  pointer-events: none;
}

/* On garantit que le glitch reste “par-dessus tout” et pas teinté par nos overlays */
#glitch-screen{
  isolation: isolate;
  z-index: 9999;
}
/* TEST : si ça ne change rien, c'est que le CSS n'est pas lu / pas la bonne page / cache */
.page { outline: 8px solid lime !important; }

/* =========================================================
   RISO sans image (robuste)
========================================================= */

:root{
  --riso-paper: #f6f1e6;
  --riso-a: #ff2fa3; /* magenta */
  --riso-b: #00a8ff; /* bleu */
  --riso-c: #EFFF0F; /* jaune */
  --riso-k: #111;
}

/* 1) on transforme la "carte" blanche en papier */
.page{
  background-color: var(--riso-paper) !important;
  isolation: isolate;
}

/* 2) “grain/trame” pure CSS (visible mais réglable) */
.page::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:1;

  /* faux papier : taches + vignette + poussière */
  background-image:
    radial-gradient(circle at 20% 30%, rgba(0,0,0,0.06), transparent 55%),
    radial-gradient(circle at 80% 70%, rgba(0,0,0,0.05), transparent 60%),
    radial-gradient(circle at 50% 50%, rgba(0,0,0,0.04), transparent 65%),
    radial-gradient(circle at 50% 45%, rgba(0,0,0,0.07), transparent 70%);

  mix-blend-mode: multiply;
  opacity: 0.35;
}

/* 3) trame “halftone” sans image */
.page::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:2;

  /* points : on simule une trame en couches */
  background-image:
    repeating-radial-gradient(circle at 0 0,
      rgba(0,0,0,0.08) 0 0.7px,
      transparent 0.7px 3.1px),
    repeating-radial-gradient(circle at 2px 2px,
      rgba(0,0,0,0.06) 0 0.6px,
      transparent 0.6px 3.4px);

  mix-blend-mode: multiply;
  opacity: 0.22;  /* monte à 0.35 si tu veux plus fort */
}

/* contenu au-dessus des overlays */
.page > *{ position: relative; z-index: 3; }

/* 4) texte “double encre” + surimpression */
.post-binaire-texte{
  color: var(--riso-k);
  text-shadow:
    2px 0 0 rgba(0,168,255,0.35),
    -2px 2px 0 rgba(239,255,15,0.22);
}

/* ton .texte est magenta : on le rend “encre” */
.texte{
  mix-blend-mode: multiply;
}

/* 5) la flèche > en double couche */
.glitch-link.intro-arrow{
  position: relative;
  display: inline-block;
  color: var(--riso-a);
  mix-blend-mode: multiply;
}

.glitch-link.intro-arrow::after{
  content: ">";
  position: absolute;
  left: 0;
  top: 0;
  transform: translate(2px, 2px);
  color: var(--riso-b);
  opacity: 0.85;
  mix-blend-mode: multiply;
  pointer-events: none;
}

/* 6) option : rendre le cadre un peu moins “vectoriel parfait” */
.page{
  box-shadow:
    12px 12px 0 #000,
    0 0 0 1px rgba(0,0,0,0.12) inset;
}

