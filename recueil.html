<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>fran· — recueil</title>
  <link rel="stylesheet" href="style.css" />

  <style>
    /* =========================================================
       FONTS
    ========================================================= */

    @font-face {
      font-family: "AdelpheFructidorRegular";
      src: url("Adelphe-FructidorRegular.woff2") format("woff2");
      font-display: swap;
    }

    @font-face {
      font-family: "EscabeauRegular";
      src: url("Escabeau-Regular.otf") format("opentype");
      font-display: swap;
    }

    @font-face {
      font-family: "DINdong";
      src: url("DINdong.ttf") format("truetype");
      font-display: swap;
    }

    @font-face {
      font-family: "PubliFluorNormale";
      src: url("PubliFluorNormale.otf") format("opentype");
      font-display: swap;
    }

    /* =========================================================
       BASE / PLATEAU
    ========================================================= */

    .page {
      min-height: 85vh;
      position: relative;
      overflow: visible;
    }

    /* =========================================================
       RÈGLE DU JEU (sous la 4e de couv)
    ========================================================= */

    .rules-base {
      position: absolute;
      left: 28px;
      right: 28px;
      top: 28px;

      z-index: 1000;

      background: #ffffff;
      border: 6px solid #000;
      box-shadow: 12px 12px 0 #000;
      padding: 28px 28px 22px 28px;
    }

    .rules-title {
      margin: 0 0 22px 0;
      font-family: "EscabeauRegular", sans-serif;
      font-size: 64px;
      line-height: 0.98;
      color: #ff2fa3;
      letter-spacing: -0.01em;
    }

    .rules-title sup {
      font-size: 0.4em;
      vertical-align: super;
      margin-left: 4px;
    }

    .rules-title a {
      animation: none;
      color: inherit;
      text-decoration: none;
      border-bottom: 2px solid currentColor;
    }

    .rules-text {
      margin: 0 0 18px 0;
      font-family: "AdelpheFructidorRegular", serif;
      font-size: 17px;
      line-height: 1.6;
      color: #ff2fa3;
    }

    .rules-footnote {
      margin: 0;
      padding-top: 12px;
      border-top: 2px solid rgba(255, 47, 163, 0.35);

      font-family: "AdelpheFructidorRegular", serif;
      font-size: 14px;
      line-height: 1.5;
      color: #ff2fa3;
    }

    .rules-close {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #fff;
      border: 3px solid #000;
      box-shadow: 4px 4px 0 #000;
      width: 30px;
      height: 30px;
      line-height: 24px;
      font-size: 18px;
      cursor: pointer;
      padding: 0;
      color: #ff2fa3;
    }

    /* =========================================================
       POST-ITS (poèmes)
    ========================================================= */

    .postit {
      position: absolute;
      left: 0;
      top: 0;
      cursor: grab;

      width: 360px;
      max-width: 680px;

      --accent: #00a8ff;
      --shadow: #00a8ff;
    }

    .postit.dragging {
      cursor: grabbing;
      user-select: none;
    }

    .postit:hover {
      animation: postit-shake 0.25s steps(2) infinite;
    }

    @keyframes postit-shake {
      0%   { transform: translate(0,0); }
      25%  { transform: translate(-2px,1px); }
      50%  { transform: translate(2px,-1px); }
      75%  { transform: translate(-1px,-2px); }
      100% { transform: translate(0,0); }
    }

    .postit-bar {
      background: var(--accent);
      min-height: 36px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;

      border: 4px solid var(--accent);
      border-bottom: none;
      box-shadow: 12px 12px 0 var(--shadow);
      padding: 6px 8px;
    }

    .postit-title {
      font-family: "PubliFluorNormale", PostBinaire, sans-serif;
      font-size: 18px;
      line-height: 1.05;
      color: #fff;
      opacity: 0.98;

      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2;
      overflow: hidden;
      word-break: break-word;
    }

    .postit-actions {
      display: flex;
      align-items: center;
      gap: 6px;
      flex: 0 0 auto;
    }

    .close-postit {
      background: #fff;
      border: 2px solid var(--accent);
      color: var(--accent);
      width: 24px;
      height: 24px;
      line-height: 18px;
      font-size: 16px;
      cursor: pointer;
      padding: 0;
    }

    .postit-content {
      background: #ffffff;
      border: 4px solid var(--accent);
      box-shadow: 12px 12px 0 var(--shadow);
      padding: 22px;

      font-family: "AdelpheFructidorRegular", serif;
      font-size: 16px;
      line-height: 1.5;
      color: var(--accent);

      max-height: 60vh;
      overflow: auto;
      overscroll-behavior: contain;
    }

    /* =========================================================
       POST-IT 4E DE COUV (devant tout, sans titre)
    ========================================================= */

    .postit-cover {
      width: 560px;
      max-width: 680px;

      z-index: 99999;

      --accent: #ff2fa3;
      --shadow: #ff2fa3;
    }

    .postit-cover .postit-title {
      display: none;
    }

    .postit-cover .postit-bar {
      justify-content: flex-end;
    }

    .postit-cover .postit-content {
      font-family: "DINdong", serif;
      font-size: 19px;
      line-height: 1.35;
      color: #ff2fa3;
    }

    @media (max-width: 700px) {
      .rules-base,
      .postit {
        position: static;
        width: 100% !important;
        max-width: none;
        margin: 18px 0;
      }

      .rules-title {
        font-size: 42px;
      }

      .page {
        min-height: auto;
      }

      .postit-content {
        max-height: 65vh;
      }
    }
  </style>
</head>

<body>

  <div class="page">

    <div id="rules-base" class="rules-base">
      <button class="rules-close" id="close-rules" aria-label="fermer">×</button>

      <h2 class="rules-title">
        Recueil <br> auquel il <br> faudrait <br> trouver <br> un nom<sup><a href="#note-1">1</a></sup>
      </h2>

      <p class="rules-text">
        lorem ipsum
      </p>

      <p class="rules-footnote" id="note-1">
        1 — mais peut-être que donner un nom c'est déjà fermer l'horizon
      </p>
    </div>

  </div>

  <div id="footer-placeholder"></div>

  <div id="glitch-screen">
    <img src="glitch.png" alt="">
  </div>

  <script src="glitch.js"></script>

  <script>
    fetch("footer.html")
      .then(r => r.text())
      .then(html => {
        document.getElementById("footer-placeholder").innerHTML = html;
      });
  </script>

  <script>
  (function () {

    const page = document.querySelector(".page");
    const rules = document.getElementById("rules-base");
    const closeRules = document.getElementById("close-rules");

    const palette = ["#ff2fa3", "#000000", "#00a8ff"];

    let topZ = 500;

    function bringToFront(el) {
      // ✅ la 4e de couv reste toujours au top
      if (el && el.dataset && el.dataset.pin === "top") {
        el.style.zIndex = "99999";
        return;
      }
      topZ += 1;
      el.style.zIndex = topZ;
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;");
    }

    function pickWidthForText(title, body) {
      const text = (title || "") + "\n" + (body || "");
      const len = text.length;

      if (len < 400)  return 360;
      if (len < 900)  return 420;
      if (len < 1600) return 520;
      return 620;
    }

    function randomizeInPage(el, container) {
      const minVisible = 80;

      const safeW = Math.max(container.clientWidth, 680);
      const safeH = Math.max(container.clientHeight, Math.floor(window.innerHeight * 0.85));

      const maxX = safeW - minVisible;
      const maxY = safeH - minVisible;

      const minX = -(el.offsetWidth - minVisible);
      const minY = -(el.offsetHeight - minVisible);

      const x = minX + Math.random() * (maxX - minX);
      const y = minY + Math.random() * (maxY - minVisible);

      el.style.left = x + "px";
      el.style.top  = y + "px";
    }

    function makeDraggable(el) {
      let dragging = false, startX = 0, startY = 0, startLeft = 0, startTop = 0;

      el.addEventListener("mousedown", startDrag);
      el.addEventListener("touchstart", startDrag, { passive: false });

      function startDrag(e) {
        if (e.target && e.target.classList && e.target.classList.contains("close-postit")) return;

        bringToFront(el);

        const evt = e.touches ? e.touches[0] : e;
        dragging = true;
        el.classList.add("dragging");

        startX = evt.clientX;
        startY = evt.clientY;
        startLeft = el.offsetLeft;
        startTop = el.offsetTop;

        document.addEventListener("mousemove", drag);
        document.addEventListener("mouseup", stopDrag);
        document.addEventListener("touchmove", drag, { passive: false });
        document.addEventListener("touchend", stopDrag);
      }

      function drag(e) {
        if (!dragging) return;
        e.preventDefault();
        const evt = e.touches ? e.touches[0] : e;
        el.style.left = startLeft + (evt.clientX - startX) + "px";
        el.style.top  = startTop  + (evt.clientY - startY) + "px";
      }

      function stopDrag() {
        dragging = false;
        el.classList.remove("dragging");
        document.removeEventListener("mousemove", drag);
        document.removeEventListener("mouseup", stopDrag);
        document.removeEventListener("touchmove", drag);
        document.removeEventListener("touchend", stopDrag);
      }
    }

    function buildPostit({ title, body }, accent, extraClass = "") {
      const wrap = document.createElement("div");
      wrap.className = `postit post-binaire-texte ${extraClass}`.trim();

      wrap.style.setProperty("--accent", accent);
      wrap.style.setProperty("--shadow", accent);

      wrap.style.zIndex = String(50 + Math.floor(Math.random() * 350));

      const titleHtml = title ? escapeHtml(title) : "";

      wrap.innerHTML = `
        <div class="postit-bar">
          <span class="postit-title">${titleHtml}</span>
          <div class="postit-actions">
            <button class="close-postit" aria-label="fermer">×</button>
          </div>
        </div>
        <div class="postit-content"></div>
      `;

      if (!title) {
        wrap.querySelector(".postit-title").textContent = "";
      }

      wrap.style.width = pickWidthForText(title, body) + "px";
      wrap.querySelector(".postit-content").innerHTML = body || "";

      wrap.querySelector(".close-postit").addEventListener("click", (e) => {
        e.stopPropagation();
        wrap.style.display = "none";
      });

      wrap.addEventListener("click", () => bringToFront(wrap));

      page.appendChild(wrap);

      requestAnimationFrame(() => {
        if (!window.matchMedia("(max-width: 700px)").matches) {
          randomizeInPage(wrap, page);
        }
      });

      makeDraggable(wrap);
      return wrap;
    }

    // 4E DE COUV (pinned top)
    const coverText = `« j’ai commencé à écrire pour essayer de trouver le chemin des temples cachés sur mes îles intérieures et dont j’ignore encore, un jour sur deux, la voie d’accès. le soleil peut aider, la lune aussi mais le monde tangible — celui que beaucoup appelle "le vrai" — est une vraie plaie : il bourdonne trop fort et ne fait pas beaucoup de miel. »`;

    const cover = buildPostit(
      { title: "", body: coverText },
      "#ff2fa3",
      "postit-cover"
    );
    cover.dataset.pin = "top";
    cover.style.zIndex = "99999";

    // 15 POÈMES (1 rempli)
    const poems = [
      {
        title: "",
        body: `quatre heures du mat<br>
je dors pas et c’est pas parce que j’ai trop bu<br>
c’est une nouvelle manie de mon corps<br>
le refus<br><br>

j’essaie d’écrire un poème<br>
il contiendrait le nom de<br>
tous les pays colonisés<br>
dans le monde mais<br><br>

flicaille<br>
y en a trop<br>
je sais plus quoi faire<br>
j’ai peur d’en oublier<br><br>

je me rappelle de marker<br>
qui se demande où sont cell..eux qui<br>
avec le che<br>
tremblent d’indignation à chaque fois qu’une injustice est commise dans le monde<br><br>

moi jte jure<br>
je ne tremble plus<br>
à ce stade<br>
c’est carrément une crise d’épilepsie`
      },
      
{ title: "", body: `lui : « mais alors ce livre, vous allez le faire ? que je vous donne une bourse ou non ? vous trouverez de <em>toute façon</em> un moyen de le faire, je me trompe ? »<br><br>

moi : « oui je le ferai. non, vous ne vous trompez pas. »<br><br>

lui : « alors : ça ne sert à rien que je vous aide. »<br><br>

<em>silence</em><br><br>

lui : « vous, vous faite de la poésie-guérilla, l’argent ne vous servirait à rien. »<br><br><br>

<em>claquement de porte sur mon pif</em><br>
<em>bye</em><br><br><br>

— des fois je ne devrais pas être honnête<br>
je devrais assumer de tricher<br>
leur dire que j’ai trop besoin d’eux des fois<br>
je devrais lécher un ou deux culs mais<br><br><br>

<em>déso</em><br>
je suis hyper sélectif..ve quand il s’agit de boule —<br><br>

alors<br>
je suis rentré..e chez moi<br>
j’ai rempli le frigo de colère<br>
de mots de colère<br>
de poésie de colère<br>
de livres entiers sous acide colérique parce que c’était tout ce qui me restait<br>
et j’ai continué à faire une guerre qu’on me prête mais que je n’ai jamais voulue<br>
j’ai continué la guérilla avec des mots quand je voulais seulement parler d’amour<br>
d’autres possibles<br>
de l’autre monde<br>
celui qui est derrière le monde<br>
derrière les ombres<br>
derrière l’idée qu’il se fait de lui-même<br><br><br>

c’est con`
 }, 
      
      { title: `What power art thou,
Who from below
Hast made me rise?`, body: `dehors il y a le gel qui prend et qui masque tout<br>
jusqu’à la fenêtre du train<br>
jusqu’aux rails qu’on nous avait vendus comme le futur&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brillant<br><br>

je ne sais plus trop où regarder<br>
où trouver la lumière d’une étoile<br>
d’une phrase d’un petit espoir<br>
j’aimerais dormir<br>
dormir fumer dormir<br>
faire entrer un peu de<br>
fumer un peu de fumée<br>
chaude<br><br>

jtj<br>
jtj jpp<br>
laisse-moi dormir steuplé<br>
j’ai plus la force là<br>
plus rien<br>
dormir<br>
steuplé<br>
laisse-moi<br><br>

juste<br><br><br>

domir<br>
un peu<br><br><br>

longtemps —<br><br>

dehors il y a le gel qui prend et qui masque tout<br>
jusqu’à la fenêtre du train<br>
jusqu’aux rails qu’on nous avait<br>
<span class="bombs-line">DEHORS IL Y A LES BOMBES QUI TOMBENT</span><br><br><br>

pas dans notre jardin c'est sûr mais c'est tout comme<br>
parce que tant qu'une bombe tombera ce sera dans notre flicaille de jardin dans notre flicaille de jardin à nous tous..tes qui sommes dans le même bateau loin de ceux qui nous considèrent comme des animaux mais qui n’ont jamais rien produit qui sorte le monde du monde<br>
on n'est pas si séparé..es que ça non jte jure quand i..els perdent un bébé c'est le nôtre qui est perdu rien que le nôtre tous les nôtres alors<br>
il nous reste les mots bien sûr<br>
les mots que je voudrais bombes pour une fois non<br>
même pas jte jure<br>
moi<br><br>

je voudrais seulement&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ouvrir<br>
je voudrais seulement ouvrir une brèche de lumière et de chaleur et me dire que mes armes sont d’une nouvelle espèce<br>
d’une espèce qui ne fait pas sortir les tripes mais les larmes<br>
celles de joies<br>
celles des émotions trop énormes qui font déborder les lacs dans les yeux péter tous les barrages pour que les truites arc-en-ciel puissent remonter aux racines de leur ciel<br>
j’aimerais que mes armes à moi elles fassent gicler le bonheur mais<br>
de toute façon<br>
je peux plus bouger<br>
je peux même plus<br>
même plus<br><br>

respirer jte jure<br><br>

j’aimerais me lever<br>
de nouveau<br>
mais jpp<br><br>

jtj jpp<br>
dehors il y a le gel qui prend et&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toi<br><br>

toi qui te tiens au seuil<br>
au milieu de la montagne<br>
première oasis sur la première étape du chemin<br>
là<br>
au milieu<br>
tu as fait prendre un feu de camp<br>
et de tous les côtés<br>
de tous les chemins frigorifié..es<br>
des centaines des milliers<br>
des multitudes se rejoignent<br>
— qui sont cell..eux qui montent du désert<br>
en colonne de fumée ?<br><br>

i..els grondent que je ne suis pas seul..e<br>
que je suis des centaines des milliers<br>
multitude<br><br>

i..els grondent<br>
« lâche pas<br>
lâche pas bordel<br>
on lâchera pas<br>
sans un..e seul..e de nous-même on est foutu..es<br>
on a besoin de nous<br><br>

d'une armée de solitaires prêt..es à prendre le monde dans leurs bras sans violence<br>
avec désir<br>
avec désir d'être ensemble sans gueule de bois sans mal de bide<br>
on te veut vivant..e<br>
on a besoin de te sentir vivre là<br>
tout contre nous tous..tes<br>
ensemble<br><br>

on te lâchera pas »`
 }, { title: "", body: `parfois je me demande<br>
si le monde m’appelle vraiment<br>
ou si c’est seulement mon imagination<br>
qui fait des siennes<br><br>

genre<br>
est-ce que j’ai vraiment des pouvoirs magiques ?<br><br>

genre<br>
est-ce qu’on s’est vraiment rencontré de l’autre côté de la galaxie il y a trois éons et demi ?<br><br>

genre<br>
est-ce que je suis vraiment jésus ?<br><br>

<span class="aside-question">—&nbsp;claquement de langue interrogateur</span>`
}, 
      
      { title: "", body: "" },
      { title: "", body: "" }, { title: "", body: "" }, { title: "", body: "" }, { title: "", body: "" },
      { title: "", body: "" }, { title: "", body: "" }, { title: "", body: "" }, { title: "", body: "" },
      { title: "", body: "" }, { title: "", body: "" }
    ];

    poems.forEach((p, i) => {
      const accent = palette[i % palette.length];
      buildPostit(p, accent);
    });

    closeRules.addEventListener("click", () => {
      rules.style.display = "none";
    });

  })();
  </script>

</body>
</html>
