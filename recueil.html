<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>franÂ· â€” recueil</title>
  <link rel="stylesheet" href="style.css" />

  <style>
    /* =========================================================
       FONTS LOCALES (spÃ©cifique Ã  cette page)
    ========================================================= */

    @font-face {
      font-family: "AdelpheFructidorRegular";
      src: url("Adelphe-FructidorRegular.woff2") format("woff2");
      font-display: swap;
    }

    @font-face {
      font-family: "PubliFluorNormale";
      src: url("PubliFluorNormale.otf") format("opentype");
      font-display: swap;
    }

    /* =========================================================
       RECUEIL â€” STYLES SPÃ‰CIFIQUES
    ========================================================= */

    /* Plateau de jeu : sinon la hauteur "utile" est minuscule */
    .page {
      min-height: 78vh;
    }

    .recueil-header {
      margin-bottom: 18px;
    }

    .recueil-subtitle {
      margin: 6px 0 0 0;
      font-size: 16px;
      font-style: italic;
      color: #ff2fa3;
      opacity: 0.85;
    }

    /* ---------------------------------------------------------
       RÃˆGLE DU JEU : devant, mais le fond reste visible
    --------------------------------------------------------- */

    .rules-base {
      position: absolute;
      left: 28px;
      right: 28px;
      top: 28px;
      z-index: 9999;

      background: #ffffff;
      border: 6px solid #000000;
      box-shadow: 12px 12px 0 #000;
      padding: 18px 18px 16px 18px;
      margin: 0;

      overflow: hidden;
    }

    .rules-base-title {
      margin: 0 0 10px 0;
      font-size: 20px;
      line-height: 1.2;
      color: #ff2fa3;
    }

    .rules-base-text {
      margin: 0;
      font-size: 14px;
      line-height: 1.5;
      color: #ff2fa3;
    }

    .rules-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #fff;
      border: 3px solid #000;
      box-shadow: 4px 4px 0 #000;
      width: 28px;
      height: 28px;
      line-height: 22px;
      font-size: 18px;
      cursor: pointer;
      padding: 0;
      color: #ff2fa3;
    }

    .rules-close:hover {
      opacity: 0.85;
    }

    /* ---------------------------------------------------------
       POST-ITS POÃˆMES
    --------------------------------------------------------- */

    .postit-poem {
      position: absolute;
      width: 360px;          /* base, override via JS */
      max-width: 620px;
      cursor: grab;
      left: 0;
      top: 0;
      --accent: #00a8ff;
      --shadow: #00a8ff;
    }

    .postit-poem.dragging {
      cursor: grabbing;
      user-select: none;
    }

    /* Tremblement au survol */
    .postit-poem:hover {
      animation: postit-shake 0.25s steps(2) infinite;
    }

    @keyframes postit-shake {
      0%   { transform: translate(0,0); }
      25%  { transform: translate(-2px,1px); }
      50%  { transform: translate(2px,-1px); }
      75%  { transform: translate(-1px,-2px); }
      100% { transform: translate(0,0); }
    }

    .postit-poem .postit-bar {
      background: var(--accent);
      min-height: 34px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border: 4px solid var(--accent);
      border-bottom: none;
      box-shadow: 10px 10px 0 var(--shadow);
      padding: 6px 8px;
      gap: 10px;
    }

    .postit-poem .postit-title {
      font-family: "PubliFluorNormale", PostBinaire, sans-serif;
      font-size: 16px;
      line-height: 1.1;
      color: #fff;
      opacity: 0.98;

      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2;
      overflow: hidden;

      word-break: break-word;
    }

    .postit-poem .postit-actions {
      display: flex;
      gap: 6px;
      align-items: center;
      flex: 0 0 auto;
    }

    .postit-poem .close-poem {
      background: #fff;
      border: 2px solid var(--accent);
      color: var(--accent);
      width: 22px;
      height: 22px;
      line-height: 18px;
      font-size: 16px;
      cursor: pointer;
      padding: 0;
      flex: 0 0 auto;
    }

    .postit-poem .postit-content {
      background: #ffffff;
      border: 4px solid var(--accent);
      box-shadow: 10px 10px 0 var(--shadow);
      padding: 18px;

      font-family: "AdelpheFructidorRegular", serif;
      font-size: 16px;
      line-height: 1.5;

      color: var(--accent);
      text-align: left;

      font-feature-settings: "liga" 1, "dlig" 1;
      white-space: pre-wrap;

      max-height: 55vh;
      overflow: auto;
      overscroll-behavior: contain;
    }

    /* ---------------------------------------------------------
       MOBILE : pile statique
    --------------------------------------------------------- */
    @media (max-width: 700px) {
      .rules-base {
        position: static;
        margin: 0 0 18px 0;
      }

      .page {
        min-height: auto;
      }

      .postit-poem {
        position: static;
        width: 100% !important;
        max-width: none;
        margin: 18px 0;
      }

      .postit-poem .postit-content {
        max-height: 65vh;
      }
    }
  </style>
</head>

<body>

  <div class="page">

    <div class="recueil-header">
      <h1 class="post-binaire-texte titre">recueil</h1>
      <p class="post-binaire-texte recueil-subtitle">
        textes sur post-its â€” dÃ©placer / cliquer pour ramener devant
      </p>
    </div>

    <!-- RÃˆGLE DU JEU : devant au dÃ©part -->
    <div id="rules-base" class="rules-base post-binaire-texte" aria-modal="true" role="dialog">
      <button class="rules-close" id="close-rules" aria-label="fermer">Ã—</button>
      <h2 class="rules-base-title post-binaire-texte">rÃ¨gle du jeu</h2>
      <p class="rules-base-text post-binaire-texte">
        â€” chaque post-it contient un texte<br>
        â€” tu peux les dÃ©placer<br>
        â€” cliquer sur un post-it le ramÃ¨ne au premier plan<br>
        â€” â€œÃ—â€ le ferme<br><br>
        (ferme cette fenÃªtre pour jouer)
      </p>
    </div>

    <!-- Les post-its sont injectÃ©s par JS -->
  </div>

  <!-- Footer partagÃ© -->
  <div id="footer-placeholder"></div>

  <!-- Ã‰cran de transition glitch -->
  <div id="glitch-screen">
    <img src="glitch.png" alt="">
  </div>

  <script src="glitch.js"></script>

  <script>
    fetch("footer.html")
      .then(r => r.text())
      .then(html => {
        document.getElementById("footer-placeholder").innerHTML = html;
      });
  </script>

  <script>
  (function () {

    const page = document.querySelector(".page");
    const rulesBase = document.getElementById("rules-base");
    const closeRulesBtn = document.getElementById("close-rules");

    let topZ = 200;

    const accents = ["#00a8ff", "#ff2fa3", "#000000"];

    const poems = [
      {
        title: "",
        body: `quatre heures du mat
je dors pas et câ€™est pas parce que jâ€™ai trop bu 
câ€™est une nouvelle manie de mon corps
le refus 

jâ€™essaie dâ€™Ã©crire un poÃ¨me 
il contiendrait le nom de
tous les pays colonisÃ©s 
dans le monde mais

flicaille
y en a trop 
je sais plus quoi faire
jâ€™ai peur dâ€™en oublier

je me rappelle de marker 
qui se demande oÃ¹ sont cell..eux qui 
avec le che 
tremblent dâ€™indignation Ã  chaque fois quâ€™une injustice est commise dans le monde

moi jte jure 
je ne tremble plus
Ã  ce stade
câ€™est carrÃ©ment une crise dâ€™Ã©pilepsie`
      },
      {
        title: "",
        body: `lui : Â« mais alors ce livre, vous allez le faire ? que je vous donne une bourse ou non ? vous trouverez de toute faÃ§on un moyen de le faire, je me trompe ? Â»

moi : Â« oui je le ferai. non, vous ne vous trompez pas. Â»

lui : Â« alors : Ã§a ne sert Ã  rien que je vous aide. Â»

silence

lui : Â« vous, vous faite de la poÃ©sie-guÃ©rilla, lâ€™argent ne vous servirait Ã  rien. Â»


claquement de porte sur mon pif 
bye


â€” des fois je ne devrais pas Ãªtre honnÃªte
je devrais assumer de tricher
leur dire que jâ€™ai trop besoin dâ€™eux des fois
je devrais lÃ©cher un ou deux culs mais 


dÃ©so
je suis hyper sÃ©lectif..ve quand il sâ€™agit de boule â€”

alors 
je suis rentrÃ©..e chez moi 
jâ€™ai rempli le frigo de colÃ¨re
de mots de colÃ¨re
de poÃ©sie de colÃ¨re 
de livres entiers sous acide colÃ©rique parce que câ€™Ã©tait tout ce qui me restait
et jâ€™ai continuÃ© Ã  faire une guerre quâ€™on me prÃªte mais que je nâ€™ai jamais voulue 
jâ€™ai continuÃ© la guÃ©rilla avec des mots quand je voulais seulement parler dâ€™amour
dâ€™autres possibles 
de lâ€™autre monde 
celui qui est derriÃ¨re le monde 
derriÃ¨re les ombres 
derriÃ¨re lâ€™idÃ©e quâ€™il se fait de lui-mÃªme


câ€™est con`
      },
      {
        title: `What power art thou,
Who from below
Hast made me rise? ğŸ«`,
        body: `What power art thou,
Who from below
Hast made me rise?



dehors il y a le gel qui prend et qui masque tout 
jusquâ€™Ã  la fenÃªtre du train 
jusquâ€™aux rails quâ€™on nous avait vendus comme le futur 			brillant 

je ne sais plus trop oÃ¹ regarder 
oÃ¹ trouver la lumiÃ¨re dâ€™une Ã©toile
dâ€™une phrase dâ€™un petit espoir 
jâ€™aimerais dormir 
dormir fumer dormir 
faire entrer un peu de
fumer un peu de fumÃ©e 
chaude 

jtj
jtj jpp
laisse-moi dormir steuplÃ©
jâ€™ai plus la force lÃ  
plus rien 
dormir
steuplÃ©
laisse-moi

juste


domir
un peu 



longtemps â€”

dehors il y a le gel qui prend et qui masque tout 
jusquâ€™Ã  la fenÃªtre du train 
jusquâ€™aux rails quâ€™on nous avait DEHORS IL Y A LES BOMBES QUI TOMBENT



pas dans notre jardin c'est sÃ»r mais c'est tout comme
parce que tant qu'une bombe tombera ce sera dans notre flicaille de jardin dans notre flicaille de jardin Ã  nous tous..tes qui sommes dans le mÃªme bateau loin de ceux qui nous considÃ¨rent comme des animaux mais qui nâ€™ont jamais rien produit qui sorte le monde du monde
 on n'est pas si sÃ©parÃ©..es que Ã§a non jte jure quand i..els perdent un bÃ©bÃ© c'est le nÃ´tre qui est perdu rien que le nÃ´tre tous les nÃ´tres alors
il nous reste les mots bien sÃ»r 
les mots que je voudrais bombes pour une fois non
mÃªme pas jte jure  
moi

je voudrais seulement		ouvrir 
je voudrais seulement ouvrir une brÃ¨che de lumiÃ¨re et de chaleur et me dire que mes armes sont dâ€™une nouvelle espÃ¨ce 
dâ€™une espÃ¨ce qui ne fait pas sortir les tripes mais les larmes
celles de joies
celles des Ã©motions trop Ã©normes qui font dÃ©border les lacs dans les yeux pÃ©ter tous les barrages pour que les truites arc-en-ciel puissent remonter aux racines de leur ciel 
jâ€™aimerais que mes armes Ã  moi elles fassent gicler le bonheur mais 
de toute faÃ§on 
je peux plus bouger 
je peux mÃªme plus 
mÃªme plus 

respirer jte jure
 
jâ€™aimerais me lever 
de nouveau
mais jpp

jtj jpp
dehors il y a le gel qui prend et	      toi
 
toi qui te tiens au seuil 
au milieu de la montagne 
premiÃ¨re oasis sur la premiÃ¨re Ã©tape du chemin 
lÃ 
au milieu
tu as fait prendre un feu de camp 
et de tous les cÃ´tÃ©s 
de tous les chemins frigorifiÃ©..es 
des centaines des milliers 
des multitudes se rejoignent 
â€” qui sont cell..eux qui montent du dÃ©sert
en colonne de fumÃ©e ?

i..els grondent que je ne suis pas seul..e
que je suis des centaines des milliers 
multitude

i..els grondent
Â« lÃ¢che pas 
lÃ¢che pas bordel
on lÃ¢chera pas
sans un..e seul..e de nous-mÃªme on est foutu..es 
on a besoin de nous

d'une armÃ©e de solitaires prÃªt..es Ã  prendre le monde dans leurs bras sans violence 
avec dÃ©sir
avec dÃ©sir d'Ãªtre ensemble sans gueule de bois sans mal de bide
on te veut vivant..e
on a besoin de te sentir vivre lÃ 
tout contre nous tous..tes 
ensemble

on te lÃ¢chera pas  Â»`
      },
      {
        title: "",
        body: `parfois je me demande si le monde mâ€™appelle vraiment ou si câ€™est seulement mon imagination qui fait des siennes


genre : 
est-ce que jâ€™ai vraiment des pouvoirs magiques ?


genre : 
est-ce quâ€™on sâ€™est vraiment rencontrÃ©..es de lâ€™autre cÃ´tÃ© de la galaxie il y a trois Ã©ons et demi ? 


genre :  
est-ce que je suis vraiment jÃ©sus ?



â€” claquement de langue interrogateur`
      }
      /* (les autres poÃ¨mes restent identiques Ã  ta version actuelle) */
    ];

    function bringToFront(el) {
      topZ += 1;
      el.style.zIndex = topZ;
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;");
    }

    function pickWidthForPoem(poem) {
      const text = (poem.title || "") + "\n" + (poem.body || "");
      const len = text.length;

      if (len < 500) return 360;
      if (len < 1100) return 420;
      if (len < 2000) return 500;
      return 580;
    }

    /* Random â€œÃ©clatÃ©â€ avec hauteur utile safe */
    function randomizeInPage(el, container) {
      const minVisible = 80;

      const safeW = Math.max(container.clientWidth, 680);
      const safeH = Math.max(container.clientHeight, Math.floor(window.innerHeight * 0.78));

      const maxX = safeW - minVisible;
      const maxY = safeH - minVisible;

      const minX = -(el.offsetWidth - minVisible);
      const minY = -(el.offsetHeight - minVisible);

      const x = minX + Math.random() * (maxX - minX);
      const y = minY + Math.random() * (maxY - minY);

      el.style.left = x + "px";
      el.style.top  = y + "px";
    }

    function makeDraggable(el) {
      let dragging = false, startX = 0, startY = 0, startLeft = 0, startTop = 0;

      el.addEventListener("mousedown", startDrag);
      el.addEventListener("touchstart", startDrag, { passive: false });

      function startDrag(e) {
        if (e.target && e.target.classList && e.target.classList.contains("close-poem")) return;
        bringToFront(el);

        const evt = e.touches ? e.touches[0] : e;
        dragging = true;
        el.classList.add("dragging");

        startX = evt.clientX;
        startY = evt.clientY;
        startLeft = el.offsetLeft;
        startTop = el.offsetTop;

        document.addEventListener("mousemove", drag);
        document.addEventListener("mouseup", stopDrag);
        document.addEventListener("touchmove", drag, { passive: false });
        document.addEventListener("touchend", stopDrag);
      }

      function drag(e) {
        if (!dragging) return;
        e.preventDefault();
        const evt = e.touches ? e.touches[0] : e;
        el.style.left = startLeft + (evt.clientX - startX) + "px";
        el.style.top  = startTop  + (evt.clientY - startY) + "px";
      }

      function stopDrag() {
        dragging = false;
        el.classList.remove("dragging");
        document.removeEventListener("mousemove", drag);
        document.removeEventListener("mouseup", stopDrag);
        document.removeEventListener("touchmove", drag);
        document.removeEventListener("touchend", stopDrag);
      }
    }

    function buildPostit(poem, idx) {
      const wrap = document.createElement("div");
      wrap.className = "postit-poem post-binaire-texte";

      const c = accents[idx % accents.length];
      wrap.style.setProperty("--accent", c);
      wrap.style.setProperty("--shadow", c);

      // z-index initial alÃ©atoire, stable (pas de â€œtout devantâ€)
      wrap.style.zIndex = String(10 + Math.floor(Math.random() * 160));

      const titleHtml = poem.title ? escapeHtml(poem.title) : "";

      wrap.innerHTML = `
        <div class="postit-bar">
          <span class="postit-title">${titleHtml}</span>
          <div class="postit-actions">
            <button class="close-poem" aria-label="fermer">Ã—</button>
          </div>
        </div>
        <div class="postit-content">${escapeHtml(poem.body)}</div>
      `;

      wrap.querySelector(".close-poem").addEventListener("click", (e) => {
        e.stopPropagation();
        wrap.style.display = "none";
      });

      wrap.style.width = pickWidthForPoem(poem) + "px";

      page.appendChild(wrap);

      requestAnimationFrame(() => {
        if (!window.matchMedia("(max-width: 700px)").matches) {
          randomizeInPage(wrap, page);
        }
      });

      wrap.addEventListener("click", () => bringToFront(wrap));
      makeDraggable(wrap);

      return wrap;
    }

    poems.forEach((p, i) => buildPostit(p, i));

    // fermer la rÃ¨gle du jeu = juste la cacher
    closeRulesBtn.addEventListener("click", () => {
      rulesBase.style.display = "none";
    });

  })();
  </script>

</body>
</html>
