<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>fran¬∑</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="page">

    <h1 class="post-binaire-texte titre">
      bienvenu..e <span class="emoji">‚ù§Ô∏è‚Äçüî•</span>
    </h1>

    <p class="post-binaire-texte texte"> 
      j'ai finalement r√©ussi √† faire un site avec mes petits doigts ! youhou !<br>
      <br>
      bon,<br>
      il na√Æt aussi lentement que mes po√®mes...<br>
      mais il sera bient√¥t l√†.<br> 
      peut-√™tre.<br> 
      quand j'aurai fini tout ce qui tra√Æne dans mes tiroirs.<br>
      <br>
      vous pouvez d√©j√† <a href="https://franxx.ch/recueil.html">cliquer ici</a>
      pour voir une tentative de construction de mise en page pour le 
      <em>recueil auquel il faudrait trouver un nom</em>.  
      c'est √† vos risques et p√©rils, parfois √ßa marchera et parfois pas.  
      les al√©as des internets mondiaux.<br>
      <br>
      bisous si consentis.<br>
      <br>
      love œ™<br>
      <br>
      fran¬∑
    </p>

  </div>

  <!-- Post-it agenda bleu fluo -->
  <div id="postit-agenda">
    <div class="postit-bar">
      <button id="close-agenda" aria-label="Fermer le post-it agenda">√ó</button>
    </div>
    <div class="postit-content">
      <p>
        <strong>
          <span class="full-love" id="agenda-love">
            lectures et performances √† venir
          </span>
        </strong>
      </p>
      <ul>
        <li>
          31.01.25 ‚Äî 18:30 ‚Äî
          <a href="https://www.boutiquedulivre.ch/">Boutique du Livre, Neuch√¢tel</a>
          ‚Äî Performance <em>"Dieu ressemble vaguement √† quelqu'un..e que je connais"</em>
        </li>
        <li>
          date et heure √† confirmer ‚Äî
          <a href="https://www.instagram.com/jazz.a.la.bourg/">Jazz √† la Bourg, Fribourg</a>
          ‚Äî Lecture du <em>"Recueil auquel il faudrait trouver un nom"</em>
        </li>
      </ul>
    </div>
  </div>

  <!-- ICI le footer partag√© -->
  <div id="footer-placeholder"></div>

  <!-- √âcran de transition glitch -->
  <div id="glitch-screen">
    <img src="glitch.png" alt="">
  </div>

  <!-- Script de transition -->
  <script src="glitch.js"></script>

  <!-- Script de chargement du footer -->
  <script>
    fetch("footer.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("footer-placeholder").innerHTML = data;
      });
  </script>

  <!-- Script post-it agenda : centr√©, draggable, fermable -->
  <script>
    (function() {
      var agenda = document.getElementById('postit-agenda');
      var closeBtn = document.getElementById('close-agenda');

      if (!agenda) return;

      // centre le post-it au chargement (sur grands √©crans)
      function centerAgenda() {
        // sur mobile on le laisse dans le flux normal
        if (window.matchMedia("(max-width: 700px)").matches) {
          agenda.style.position = "static";
          agenda.style.left = "";
          agenda.style.top = "";
          return;
        }

        agenda.style.position = "fixed";
        agenda.style.left = "0px";
        agenda.style.top = "0px";

        var rect = agenda.getBoundingClientRect();
        var x = (window.innerWidth  - rect.width)  / 2;
        var y = Math.max(40, (window.innerHeight - rect.height) / 2);

        agenda.style.left = x + "px";
        agenda.style.top  = y + "px";
      }

      // centre au d√©part
      window.addEventListener('load', centerAgenda);
      window.addEventListener('resize', centerAgenda);

      // bouton fermer
      if (closeBtn) {
        closeBtn.addEventListener('click', function (e) {
          e.stopPropagation();
          agenda.style.display = 'none';
        });
      }

      // DRAG
      var dragging = false;
      var startX = 0, startY = 0;
      var startLeft = 0, startTop = 0;

      function startDrag(e) {
        if (window.matchMedia("(max-width: 700px)").matches) {
          // sur mobile, on √©vite le drag compliqu√©
          return;
        }

        // ne pas draguer si on clique sur le bouton fermer
        if (e.target === closeBtn) return;

        var evt = e.touches ? e.touches[0] : e;
        dragging = true;
        agenda.classList.add('dragging');

        var rect = agenda.getBoundingClientRect();
        startLeft = rect.left;
        startTop  = rect.top;
        startX = evt.clientX;
        startY = evt.clientY;

        agenda.style.position = "fixed";
        agenda.style.left = startLeft + "px";
        agenda.style.top  = startTop  + "px";

        document.addEventListener('mousemove', onDragMove);
        document.addEventListener('mouseup', stopDrag);
        document.addEventListener('touchmove', onDragMove, { passive: false });
        document.addEventListener('touchend', stopDrag);
      }

      function onDragMove(e) {
        if (!dragging) return;
        e.preventDefault();

        var evt = e.touches ? e.touches[0] : e;
        var dx = evt.clientX - startX;
        var dy = evt.clientY - startY;

        agenda.style.left = (startLeft + dx) + "px";
        agenda.style.top  = (startTop  + dy) + "px";
      }

      function stopDrag() {
        if (!dragging) return;
        dragging = false;
        agenda.classList.remove('dragging');

        document.removeEventListener('mousemove', onDragMove);
        document.removeEventListener('mouseup', stopDrag);
        document.removeEventListener('touchmove', onDragMove);
        document.removeEventListener('touchend', stopDrag);
      }

      // on peut draguer en cliquant n'importe o√π sur le post-it (sauf la croix)
      agenda.addEventListener('mousedown', startDrag);
      agenda.addEventListener('touchstart', startDrag, { passive: false });

    })();
  </script>

  <!-- Script d'animation al√©atoire fa√ßon "FULL LOVE ON FULL MOON" -->
  <script>
    window.addEventListener("load", () => {
      const fullLove = document.getElementById("agenda-love");
      if (!fullLove) return;

      const text = fullLove.textContent.trim();
      fullLove.innerHTML = "";

      const letters = [...text];
      const spans = [];

      // cr√©ation initiale des lettres
      letters.forEach((char) => {
        const span = document.createElement("span");
        span.className = "letter";
        span.textContent = char === " " ? "\u00A0" : char;
        fullLove.appendChild(span);
        spans.push(span);
      });

      // fonction de randomisation des d√©lais
      function randomizeSequence() {
        spans.forEach((span, i) => {
          const base = i * 0.08;                       // structure de vague
          const jitter = (Math.random() - 0.5) * 1.4;  // chaos doux
          const groupDrift = Math.floor(Math.random() * 4) * 0.2;

          const delay = base + jitter + groupDrift;
          span.style.setProperty("--delay", delay + "s");
        });
      }

      // premi√®re constellation
      randomizeSequence();

      // üîÅ re-randomisation toutes les 6 secondes
      setInterval(randomizeSequence, 6000);
    });
  </script>

</body>
</html>
